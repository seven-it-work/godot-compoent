# 修仙文字游戏战斗系统开发计划

## 1. 核心需求分析
- **战斗属性**：使用修仙术语描述战斗属性（攻击、防御、生命、躲避、格挡、暴击等）
- **移动系统**：添加上下左右UI按钮，支持手机端移动
- **战斗触发**：移动到有怪物的地图格子触发战斗
- **战斗页面**：设计战斗界面和战斗逻辑

## 2. 技术实现方案

### 2.1 数据模型扩展

**修改 `src/types/game.ts`**：
- 添加战斗属性枚举和接口
- 扩展Player接口，添加战斗属性
- 扩展Location接口，添加怪物属性
- 添加怪物数据模型

**战斗属性修仙术语映射**：
| 战斗属性 | 修仙术语 | 描述 |
|---------|---------|------|
| 攻击 | 灵力攻击 | 修仙者释放法术的攻击力 |
| 防御 | 灵力防御 | 修仙者抵抗法术攻击的能力 |
| 生命 | 神魂强度 | 修仙者的生命力 |
| 躲避 | 身法 | 修仙者躲避攻击的能力 |
| 格挡 | 灵力护盾 | 修仙者格挡攻击的能力 |
| 暴击 | 灵眼 | 修仙者暴击的概率 |

### 2.2 状态管理扩展

**修改 `src/store/gameStore.ts`**：
- 添加战斗相关状态（当前战斗、战斗日志等）
- 实现上下左右移动功能
- 实现怪物生成逻辑
- 实现战斗触发检测
- 实现战斗逻辑（攻击、防御、结算等）

### 2.3 地图系统调整

**修改 `src/components/MapComponent.vue`**：
- 添加上下左右移动按钮
- 显示怪物标记
- 优化地图格子样式，区分普通格子和有怪物的格子

### 2.4 战斗组件开发

**创建 `src/components/BattleComponent.vue`**：
- 战斗界面设计
- 修仙者属性显示
- 怪物属性显示
- 战斗操作按钮（攻击、防御、逃跑等）
- 战斗日志显示
- 战斗结果处理

### 2.5 游戏流程整合

**修改 `src/App.vue`**：
- 添加战斗系统入口
- 处理系统切换逻辑

**修改 `src/components/OutdoorSystem.vue`**：
- 集成战斗系统
- 处理战斗触发

## 3. 开发步骤

1. **数据模型扩展**：修改 `game.ts`，添加战斗相关类型定义
2. **状态管理扩展**：修改 `gameStore.ts`，添加战斗相关状态和操作
3. **地图系统调整**：修改 `MapComponent.vue`，添加移动按钮和怪物显示
4. **战斗组件开发**：创建 `BattleComponent.vue`，实现战斗界面和逻辑
5. **游戏流程整合**：修改 `App.vue` 和 `OutdoorSystem.vue`，集成战斗系统
6. **测试和优化**：测试战斗系统功能，优化界面和体验

## 4. 预期效果

- 玩家可以通过上下左右按钮在地图上移动
- 移动到有怪物的格子时自动触发战斗
- 战斗界面显示修仙者和怪物的战斗属性
- 支持基本的战斗操作（攻击、防御、逃跑）
- 战斗结果影响玩家状态（经验、等级等）
- 适配手机端和PC端

## 5. 技术栈

- Vue 3 + TypeScript
- Ant Design Vue 组件库
- Pinia 状态管理
- CSS Grid 布局
- 响应式设计

## 6. 注意事项

- 确保战斗属性与修仙主题一致
- 优化手机端操作体验
- 平衡战斗难度
- 确保代码质量和性能
- 提供清晰的战斗反馈
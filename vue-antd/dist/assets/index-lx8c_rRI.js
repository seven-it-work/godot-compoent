import{d as H,c as M,a as h,o as m,b as e,e as T,n as F,t as o,f as ee,_ as P,u as te,g as ae,r as w,h as ne,i as b,j as G,w as t,k as a,F as N,l as D,m as C,p as re,q as ie,s as ce,v as ue,x as de}from"./index-D4u6JD5c.js";import X from"./æ¢ç´¢-CS9n_mRt.js";const ve={class:"spirit-progress-content"},me={key:0,class:"spirit-progress-text"},pe=H({__name:"SpiritProgress",props:{label:{},current:{},max:{},strokeColor:{},height:{default:"40px"},isCooldown:{type:Boolean,default:!1},hideLabel:{type:Boolean,default:!1}},emits:["click"],setup(c,{emit:d}){const _=c,s=d,v=M(()=>Math.min(_.current/_.max*100,100)),g=()=>{_.isCooldown||s("click")};return(y,r)=>(m(),h("div",{class:ee(["spirit-progress-container",{absorbable:!c.isCooldown}]),style:F({height:c.height}),onClick:g},[e("div",ve,[e("div",{class:"spirit-progress-bar",style:F({width:`${v.value}%`,backgroundColor:c.strokeColor})},null,4),c.hideLabel?T("",!0):(m(),h("div",me,o(c.label?c.label+" ":"")+o(c.current)+"/"+o(c.max),1))])],6))}}),Y=P(pe,[["__scopeId","data-v-e5e0142d"]]),_e={class:"exp-level-progress-content"},fe={class:"exp-level-progress-text"},be=H({__name:"ExpLevelProgress",props:{label:{},level:{},current:{},max:{},strokeColor:{},height:{default:"24px"}},setup(c){const d=c,_=M(()=>Math.min(d.current/d.max*100,100));return(s,v)=>(m(),h("div",{class:"exp-level-progress-container",style:F({height:c.height})},[e("div",_e,[e("div",{class:"exp-level-progress-bar",style:F({width:`${_.value}%`,backgroundColor:c.strokeColor})},null,4),e("div",fe,o(c.label)+"Lv"+o(c.level)+" "+o(c.current)+"/"+o(c.max),1)])],4))}}),he=P(be,[["__scopeId","data-v-1595f72d"]]),ge={class:"avatar-card"},ye={class:"avatar-container"},xe={class:"player-name"},ke={class:"attributes-card"},$e={class:"attributes-content"},Ce={class:"attribute-item"},we={class:"attribute-label"},Le={class:"attribute-value"},Be={class:"exp-bar-container"},Me={class:"location-card"},Se={class:"location-table"},Qe={class:"location-info-row"},Ae={class:"location-cell location-name-cell"},Ue={class:"location-name"},Ie={class:"location-cell vein-info-cell"},ze={key:0,class:"vein-info"},Ee={key:1,class:"vein-info"},Re={class:"spirit-qi-distribution"},He={class:"qi-progress-container"},Pe={class:"player-qi-card"},qe={class:"player-qi-content"},Ve={class:"player-qi-bars"},je=H({__name:"ä¿®ç‚¼",setup(c){const d=te(),_=ae(),s=M(()=>d.player),v=M(()=>d.getCurrentLocation),g=M(()=>d.canLevelUp),y=w(!1);let r=null;const q=f=>{if(!s.value.spiritRoots.find(p=>p.type===f))return!1;const Q=s.value.spiritQi[`max${f.charAt(0).toUpperCase()+f.slice(1)}`]-s.value.spiritQi[f],z=v.value.spiritQi[f];return Q>0&&z>0},$=()=>{if(!s.value.isCooldown){for(const f of E.value)if(q(f))return R(f),!0;return y.value=!1,!1}},x=()=>{y.value?($(),r=window.setInterval(()=>{if(!y.value){clearInterval(r),r=null;return}$()},100)):r&&(clearInterval(r),r=null)};ne(()=>{r&&(clearInterval(r),r=null)});const S=f=>{const u=s.value.spiritRoots.find(k=>k.type===f);return`${u?.name} lv${u?.level}`},i=M(()=>[{label:"æ”»å‡»",value:s.value.attributes.attack},{label:"é˜²å¾¡",value:s.value.attributes.defense},{label:"ç”Ÿå‘½",value:`${s.value.attributes.health}/${s.value.attributes.maxHealth}`},{label:"é—ªé¿",value:s.value.attributes.dodge},{label:"æ ¼æŒ¡",value:s.value.attributes.block},{label:"æš´å‡»",value:s.value.attributes.critical}]),E=w(["gold","wood","water","fire","earth"]),I=w({gold:"é‡‘",wood:"æœ¨",water:"æ°´",fire:"ç«",earth:"åœŸ"}),V=w({gold:"#ffd700",wood:"#90ee90",water:"#87ceeb",fire:"#ff6347",earth:"#deb887"}),R=f=>{d.player.isCooldown||d.absorbSpiritQi(f)},W=()=>{d.canLevelUp&&d.levelUp()},J=()=>{console.log("goExplore"),_.push("/mobile/explore")};return(f,u)=>{const k=b("a-col"),Q=b("a-row"),z=b("a-button"),p=b("a-checkbox"),L=b("a-layout-content"),l=b("a-layout");return m(),G(l,{class:"mobile-cultivation",style:{padding:0,margin:0}},{default:t(()=>[a(L,{style:{padding:0,margin:0}},{default:t(()=>[a(Q,{gutter:[4,4]},{default:t(()=>[a(k,{span:6},{default:t(()=>[e("div",ge,[e("div",ye,[u[1]||(u[1]=e("div",{class:"avatar"},[e("div",{class:"avatar-placeholder"},"ä¿®")],-1)),e("div",xe,o(s.value.name),1)])])]),_:1}),a(k,{span:18},{default:t(()=>[e("div",ke,[u[2]||(u[2]=e("div",{class:"card-title"},"åŸºç¡€å±æ€§",-1)),e("div",$e,[a(Q,{gutter:[4,4]},{default:t(()=>[(m(!0),h(N,null,D(i.value,(n,B)=>(m(),G(k,{span:12,key:B},{default:t(()=>[e("div",Ce,[e("span",we,o(n.label),1),e("span",Le,o(n.value),1)])]),_:2},1024))),128))]),_:1}),e("div",Be,[a(he,{label:"ç­‰çº§",level:s.value.level,current:s.value.exp,max:s.value.maxExp,strokeColor:"#52c41a",height:"24px"},null,8,["level","current","max"])])])])]),_:1})]),_:1}),a(Q,{gutter:[0,0],style:{"margin-top":"0 !important"}},{default:t(()=>[a(k,{span:12},{default:t(()=>[e("div",Me,[e("div",Se,[e("div",Qe,[e("div",Ae,[e("div",Ue,o(v.value.name),1)]),e("div",Ie,[v.value.spiritVein?(m(),h("div",ze,[e("div",null,o(v.value.spiritVein.name)+" ("+o(v.value.spiritVein.level)+"çº§)",1)])):(m(),h("div",Ee,"æ— "))])]),e("div",Re,[(m(!0),h(N,null,D(E.value,n=>(m(),h("div",{class:"qi-distribution-item",key:n},[e("div",He,[a(Y,{label:I.value[n],current:v.value.spiritQi[n],max:v.value.spiritQi[`max${n.charAt(0).toUpperCase()+n.slice(1)}`],"stroke-color":V.value[n],"is-cooldown":s.value.isCooldown,height:"24px","hide-label":!1,onClick:B=>R(n)},null,8,["label","current","max","stroke-color","is-cooldown","onClick"])])]))),128))])])])]),_:1}),a(k,{span:12},{default:t(()=>[e("div",Pe,[u[3]||(u[3]=e("div",{class:"card-title"},"ç©å®¶çµæ°”",-1)),e("div",qe,[e("div",Ve,[(m(!0),h(N,null,D(E.value,n=>(m(),h("div",{class:"player-qi-bar-item",key:n},[a(Y,{label:S(n),current:s.value.spiritQi[n],max:s.value.spiritQi[`max${n.charAt(0).toUpperCase()+n.slice(1)}`],"stroke-color":V.value[n],"is-cooldown":s.value.isCooldown,onClick:B=>R(n)},null,8,["label","current","max","stroke-color","is-cooldown","onClick"])]))),128))])])])]),_:1})]),_:1}),a(Q,{gutter:[0,0],style:{"margin-top":"0 !important"}},{default:t(()=>[a(k,{span:12},{default:t(()=>[a(z,{type:"default",disabled:!g.value,onClick:W,block:"",style:{padding:"0",margin:"0"}},{default:t(()=>[...u[4]||(u[4]=[C(" çªç ´å¢ƒç•Œ ",-1)])]),_:1},8,["disabled"])]),_:1}),a(k,{span:12,style:{display:"flex","align-items":"center","justify-content":"center",padding:"0"}},{default:t(()=>[a(p,{checked:y.value,"onUpdate:checked":u[0]||(u[0]=n=>y.value=n),onChange:x,style:{margin:"0"}},{default:t(()=>[...u[5]||(u[5]=[C(" è‡ªåŠ¨å¸æ”¶çµæ°” ",-1)])]),_:1},8,["checked"])]),_:1})]),_:1}),a(Q,{gutter:[0,0],style:{"margin-top":"4px !important"}},{default:t(()=>[a(k,{span:24},{default:t(()=>[a(z,{type:"primary",onClick:J,block:"",style:{padding:"0",margin:"0"}},{default:t(()=>[...u[6]||(u[6]=[C(" æ¢ç´¢ ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Z=P(je,[["__scopeId","data-v-9cc95290"]]),Ne={class:"battle-round"},De={class:"character-card enemy-card"},Fe={class:"character-info"},Ge={class:"character-name enemy-name"},We={class:"character-level"},Je={class:"health-bar-container"},Ke={class:"health-text"},Oe={class:"character-stats"},Xe={class:"stat-item"},Ye={class:"stat-item"},Ze={class:"battle-indicator"},Te={class:"character-card player-card"},et={class:"character-info"},tt={class:"character-name player-name"},at={class:"character-level"},lt={class:"health-bar-container"},st={class:"health-text"},ot={class:"character-stats"},nt={class:"stat-item"},rt={class:"stat-item"},it={class:"log-text"},ct={class:"battle-result"},ut={class:"result-icon"},dt={class:"result-message"},vt={key:0,class:"result-reward"},mt={class:"reward-item"},pt={class:"reward-item"},_t=H({__name:"æˆ˜æ–—",setup(c){const d=te(),_=w(!1),s=w(!1),v=w(!1),g=w(null),y=w(1),r=w("player"),q=w(["æˆ˜æ–—å¼€å§‹ï¼","ç©å®¶å‡†å¤‡æˆ˜æ–—..."]),$=w({title:"",icon:"",message:"",exp:0,items:[]}),x=M(()=>d.player),S=M(()=>d.currentMonster),i=M(()=>S.value?{name:S.value.name,level:S.value.level,health:S.value.attributes.health,maxHealth:S.value.attributes.maxHealth,attack:S.value.attributes.attack,defense:S.value.attributes.defense}:{name:"æœªçŸ¥æ€ªç‰©",level:1,health:100,maxHealth:100,attack:10,defense:5}),E=()=>{if(r.value!=="player")return;const L=Math.max(0,x.value.attributes.attack-i.value.defense);if(p(`ç©å®¶å¯¹ ${i.value.name} é€ æˆäº† ${L} ç‚¹ä¼¤å®³ï¼`),i.value.health-L<=0){u();return}r.value="enemy",p(`${i.value.name} çš„å›åˆï¼`),setTimeout(()=>{I()},1e3)},I=()=>{const L=Math.max(0,i.value.attack-x.value.attributes.defense);if(p(`${i.value.name} å¯¹ç©å®¶é€ æˆäº† ${L} ç‚¹ä¼¤å®³ï¼`),x.value.attributes.health-L<=0){k();return}r.value="player",y.value++,p(`å›åˆ ${y.value}ï¼Œç©å®¶çš„å›åˆï¼`)},V=()=>{r.value==="player"&&(_.value=!0)},R=()=>{_.value=!1,p("ç©å®¶ä½¿ç”¨äº†æŠ€èƒ½ï¼"),r.value="enemy",p(`${i.value.name} çš„å›åˆï¼`),setTimeout(()=>{I()},1e3)},W=()=>{r.value==="player"&&(s.value=!0)},J=()=>{s.value=!1,p("ç©å®¶ä½¿ç”¨äº†é“å…·ï¼"),r.value="enemy",p(`${i.value.name} çš„å›åˆï¼`),setTimeout(()=>{I()},1e3)},f=()=>{if(r.value!=="player")return;Math.random()<.5?(p("ç©å®¶æˆåŠŸé€ƒè·‘äº†ï¼"),Q()):(p("ç©å®¶é€ƒè·‘å¤±è´¥ï¼"),r.value="enemy",p(`${i.value.name} çš„å›åˆï¼`),setTimeout(()=>{I()},1e3))},u=()=>{$.value={title:"æˆ˜æ–—èƒœåˆ©",icon:"ğŸ‰",message:`ä½ å‡»è´¥äº† ${i.value.name}ï¼`,exp:100,items:["æ²»ç–—è¯æ°´","çµæ°”ä¸¹"]},v.value=!0},k=()=>{$.value={title:"æˆ˜æ–—å¤±è´¥",icon:"ğŸ’€",message:`ä½ è¢« ${i.value.name} å‡»è´¥äº†ï¼`,exp:0,items:[]},v.value=!0},Q=()=>{$.value={title:"æˆåŠŸé€ƒè·‘",icon:"ğŸƒ",message:"ä½ æˆåŠŸé€ƒç¦»äº†æˆ˜æ–—ï¼",exp:0,items:[]},v.value=!0},z=()=>{v.value=!1,d.endBattle()},p=L=>{q.value.push(L),ie(()=>{g.value&&(g.value.scrollTop=g.value.scrollHeight)})};return re(()=>{p(`é­é‡äº† ${i.value.name}ï¼`)}),(L,l)=>{const n=b("a-col"),B=b("a-row"),j=b("a-card"),O=b("a-progress"),A=b("a-button"),K=b("a-modal"),le=b("a-layout-content"),se=b("a-layout");return m(),G(se,{class:"mobile-battle"},{default:t(()=>[a(le,null,{default:t(()=>[a(j,{class:"battle-header-card",bordered:!0},{default:t(()=>[a(B,{justify:"center",gutter:[8,8]},{default:t(()=>[a(n,{span:24,class:"text-center"},{default:t(()=>[l[5]||(l[5]=e("div",{class:"battle-title"},"æˆ˜æ–—è¿›è¡Œä¸­",-1)),e("div",Ne,"ç¬¬ "+o(y.value)+" å›åˆ",1)]),_:1})]),_:1})]),_:1}),a(j,{class:"battle-area-card",bordered:!0,style:{"margin-top":"8px"}},{default:t(()=>[a(B,{gutter:[8,8]},{default:t(()=>[a(n,{span:24},{default:t(()=>[e("div",De,[l[7]||(l[7]=e("div",{class:"character-avatar enemy-avatar"},[e("span",{class:"enemy-icon"},"ğŸ‘¹")],-1)),e("div",Fe,[e("div",Ge,o(i.value.name),1),e("div",We,"Lv."+o(i.value.level),1),e("div",Je,[l[6]||(l[6]=e("div",{class:"health-label"},"ç”Ÿå‘½",-1)),a(O,{percent:i.value.health/i.value.maxHealth*100,"show-info":!1,"stroke-color":{"0%":"#ff4d4f","100%":"#52c41a"},size:"small"},null,8,["percent"]),e("div",Ke,o(i.value.health)+"/"+o(i.value.maxHealth),1)]),e("div",Oe,[e("span",Xe,"æ”»å‡»: "+o(i.value.attack),1),e("span",Ye,"é˜²å¾¡: "+o(i.value.defense),1)])])])]),_:1})]),_:1}),a(B,{justify:"center",gutter:[8,8]},{default:t(()=>[a(n,{span:24,class:"text-center"},{default:t(()=>[e("div",Ze,[e("div",{class:ee(["indicator-arrow",{"player-turn":r.value==="player","enemy-turn":r.value==="enemy"}])},o(r.value==="player"?"ç©å®¶å›åˆ":"æ•Œäººå›åˆ"),3)])]),_:1})]),_:1}),a(B,{gutter:[8,8]},{default:t(()=>[a(n,{span:24},{default:t(()=>[e("div",Te,[e("div",et,[e("div",tt,o(x.value.name),1),e("div",at,"Lv."+o(x.value.level),1),e("div",lt,[l[8]||(l[8]=e("div",{class:"health-label"},"ç”Ÿå‘½",-1)),a(O,{percent:x.value.attributes.health/x.value.attributes.maxHealth*100,"show-info":!1,"stroke-color":{"0%":"#ff4d4f","100%":"#52c41a"},size:"small"},null,8,["percent"]),e("div",st,o(x.value.attributes.health)+"/"+o(x.value.attributes.maxHealth),1)]),e("div",ot,[e("span",nt,"æ”»å‡»: "+o(x.value.attributes.attack),1),e("span",rt,"é˜²å¾¡: "+o(x.value.attributes.defense),1)])]),l[9]||(l[9]=e("div",{class:"character-avatar player-avatar"},[e("span",{class:"player-icon"},"ğŸ‘¤")],-1))])]),_:1})]),_:1})]),_:1}),a(j,{class:"battle-log-card",bordered:!0,style:{"margin-top":"8px"},title:"æˆ˜æ–—æ—¥å¿—"},{default:t(()=>[e("div",{class:"battle-log",ref_key:"logRef",ref:g},[(m(!0),h(N,null,D(q.value,(U,oe)=>(m(),h("div",{key:oe,class:"log-entry"},[e("span",it,o(U),1)]))),128))],512)]),_:1}),a(j,{class:"battle-actions-card",bordered:!0,style:{"margin-top":"8px"}},{default:t(()=>[a(B,{gutter:[8,8]},{default:t(()=>[a(n,{span:12},{default:t(()=>[a(A,{type:"primary",disabled:r.value!=="player",onClick:E,size:"small",block:""},{default:t(()=>[...l[10]||(l[10]=[C(" æ™®é€šæ”»å‡» ",-1)])]),_:1},8,["disabled"])]),_:1}),a(n,{span:12},{default:t(()=>[a(A,{type:"default",disabled:r.value!=="player",onClick:V,size:"small",block:""},{default:t(()=>[...l[11]||(l[11]=[C(" ä½¿ç”¨æŠ€èƒ½ ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}),a(B,{gutter:[8,8],style:{"margin-top":"8px"}},{default:t(()=>[a(n,{span:12},{default:t(()=>[a(A,{type:"default",disabled:r.value!=="player",onClick:W,size:"small",block:""},{default:t(()=>[...l[12]||(l[12]=[C(" ä½¿ç”¨é“å…· ",-1)])]),_:1},8,["disabled"])]),_:1}),a(n,{span:12},{default:t(()=>[a(A,{type:"default",disabled:r.value!=="player",onClick:f,size:"small",block:""},{default:t(()=>[...l[13]||(l[13]=[C(" é€ƒè·‘ ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),a(K,{open:_.value,"onUpdate:open":l[1]||(l[1]=U=>_.value=U),title:"é€‰æ‹©æŠ€èƒ½",size:"small",footer:"null"},{footer:t(()=>[a(A,{type:"primary",onClick:R},{default:t(()=>[...l[14]||(l[14]=[C("ç¡®å®š",-1)])]),_:1}),a(A,{onClick:l[0]||(l[0]=U=>_.value=!1)},{default:t(()=>[...l[15]||(l[15]=[C("å–æ¶ˆ",-1)])]),_:1})]),default:t(()=>[l[16]||(l[16]=e("div",{class:"skill-selection"},[e("div",{class:"skill-item"},[e("div",{class:"skill-name"},"æ™®é€šæ”»å‡»"),e("div",{class:"skill-desc"},"å¯¹æ•Œäººé€ æˆåŸºç¡€ä¼¤å®³"),e("div",{class:"skill-cost"},"æ¶ˆè€—: 0çµæ°”")])],-1))]),_:1},8,["open"]),a(K,{open:s.value,"onUpdate:open":l[3]||(l[3]=U=>s.value=U),title:"é€‰æ‹©é“å…·",size:"small",footer:"null"},{footer:t(()=>[a(A,{type:"primary",onClick:J},{default:t(()=>[...l[17]||(l[17]=[C("ç¡®å®š",-1)])]),_:1}),a(A,{onClick:l[2]||(l[2]=U=>s.value=!1)},{default:t(()=>[...l[18]||(l[18]=[C("å–æ¶ˆ",-1)])]),_:1})]),default:t(()=>[l[19]||(l[19]=e("div",{class:"item-selection"},[e("div",{class:"item-item"},[e("div",{class:"item-name"},"æ²»ç–—è¯æ°´"),e("div",{class:"item-desc"},"æ¢å¤å°‘é‡ç”Ÿå‘½å€¼"),e("div",{class:"item-count"},"æ•°é‡: 1")])],-1))]),_:1},8,["open"]),a(K,{open:v.value,"onUpdate:open":l[4]||(l[4]=U=>v.value=U),title:$.value.title,size:"small"},{footer:t(()=>[a(A,{type:"primary",onClick:z},{default:t(()=>[...l[20]||(l[20]=[C("ç¡®å®š",-1)])]),_:1})]),default:t(()=>[e("div",ct,[e("div",ut,o($.value.icon),1),e("div",dt,o($.value.message),1),$.value.exp>0?(m(),h("div",vt,[e("div",mt,"è·å¾—ç»éªŒ: "+o($.value.exp),1),e("div",pt,"è·å¾—ç‰©å“: "+o($.value.items.join(", ")),1)])):T("",!0)])]),_:1},8,["open","title"])]),_:1})]),_:1})}}}),ft=P(_t,[["__scopeId","data-v-8a132457"]]),bt={class:"mobile-container"},ht=H({__name:"index",setup(c){const d=de(),_=ae(),s={"/training":Z,"/outdoor":X,"/explore":X,"/battle":ft},v=M(()=>{const g=d.path.replace("/mobile","");return s[g]||Z});return ce(()=>d.path,g=>{const y=g.replace("/mobile","");s[y]||_.replace("/mobile/training")},{immediate:!0}),(g,y)=>(m(),h("div",bt,[(m(),G(ue(v.value)))]))}}),xt=P(ht,[["__scopeId","data-v-e09f77c5"]]);export{xt as default};

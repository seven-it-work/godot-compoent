# 游戏术语命名规范

## 概述

本文档定义了游戏项目中核心术语的中英文命名规范，确保代码、注释和文档中的术语一致性，减少理解和交流障碍。

## 核心术语对照表

| 中文术语 | 英文术语      | 代码实现                                    | 说明                                                                                          |
| -------- | ------------- | ------------------------------------------- | --------------------------------------------------------------------------------------------- |
| 酒馆     | Tavern        | Tavern.ts                                   | 游戏中的随从招募系统，提供可选随从供玩家购买。                                                |
| 手牌     | Hand          | Player.cards                                | 玩家已购买但未放置到战场上的卡片列表（包含随从和法术），最大7个位置。                         |
| 战场     | Battlefield   | Player.minions                              | 玩家已部署的随从所在区域，固定7个位置。                                                       |
| 战吼     | Battlecry     | minion.battlecry()                          | 随从被放置到战场时触发的主动效果。                                                            |
| 亡语     | Deathrattle   | minion.deathrattle()                        | 随从死亡时触发的被动效果。                                                                    |
| 招募     | Recruit       | Player.recruitMinion()                      | 从酒馆购买随从并添加到手牌。                                                                  |
| 放置     | Place         | Player.placeMinionFromHand()                | 从手牌将随从移动到战场。                                                                      |
| 召唤     | Summon        | Player.summonMinion()                       | 在战场当前随从的后面一个位置插入被召唤的随从。                                                |
| 出售     | Sell          | Player.sellMinion()                         | 将随从从战场或手牌出售，获得金币。                                                            |
| 三连     | Triple        | Player.checkTriple()/Player.performTriple() | 手牌中有三个相同非金色随从时，可合成为金色随从。                                              |
| 塑造法术 | Shaping Spell | Spell.isTemporary                           | 临时法术，仅存在1回合，回合结束时自动销毁；随从在场且手牌有空位时生成，无空位则进入等待队列。 |

## 详细解释

### 酒馆 (Tavern)

- 功能：提供随从不，玩家可消耗金币购买随从
- 主要方法：`refresh()`（刷新酒馆）、`buyMinion()`（购买随从）、`freeze()`/`unfreeze()`（冻结/解冻）
- 数据结构：`availableMinions`（当前酒馆可用随从列表）

### 手牌 (Hand)

- 功能：存放玩家已购买但未部署的随从
- 容量限制：最多7个随从
- 主要操作：招募、放置、出售、三连合成
- 代码实现：`Player.hand`（数组类型）

### 战场 (Battlefield)

- 功能：展示玩家已部署的随从，进行战斗
- 位置限制：固定7个位置，null表示空位置
- 主要操作：放置、移除、重新排序、触发战斗效果
- 代码实现：`Player.minions`（(Minion | null)[]类型）

### 战吼 (Battlecry)

- 触发时机：随从被放置到战场时
- 实现方式：每个具有战吼效果的随从重写`battlecry()`方法
- 调用位置：`game.ts`中的`placeMinionFromHand`方法

### 亡语 (Deathrattle)

- 触发时机：随从死亡时
- 实现方式：每个具有亡语效果的随从重写`deathrattle()`方法

### 招募 (Recruit)

- 操作流程：玩家点击酒馆中的随从 → 消耗金币 → 随从添加到手牌
- 代码实现：`Player.recruitMinion()`方法

### 放置 (Place)

- 操作流程：玩家将手牌中的随从拖动到战场 → 随从从手牌移除 → 放置到战场指定位置 → 触战吼等效果
- 代码实现：`Player.placeMinionFromHand()`方法

### 召唤 (Summon)

- 定义：在战场当前随从的后面一个位置插入被召唤的随从
- 适用范围：仅用于战场操作，不包括手牌操作
- 召唤途径：
  - 手牌召唤随从到战场
  - 战场上的随从效果触发召唤随从
  - 亡语触发召唤随从
- 位置规则：在触发召唤效果的随从后面一个位置插入，若没有跟随从则插入到第一个空位
- 容量限制：受战场7个位置限制，召唤失败会直接消失
- 代码实现：`Player.summonMinion()`方法

### 出售 (Sell)

- 功能：将随从从战场或手牌移除，获得金币
- 代码实现：`Player.sellMinion()`方法，支持'minion'（战场）和'hand'（手牌）类型

### 三连 (Triple)

- 触发条件：手牌中有3个相同的非金色随从
- 效果：合成为1个金色随从，属性和效果增强
- 代码实现：`Player.checkTriple()`（检查三连）、`Player.performTriple()`（执行合成）

### 塑造法术 (Shaping Spell)

- 定义：临时法术，仅存在1回合，回合结束时自动销毁
- 生成逻辑：当拥有塑造法术效果的随从在场时，每个回合开始时尝试生成一张塑造法术
- 手牌空位检查：生成法术时检查手牌是否有空位，有空位则直接添加，无空位则进入等待队列
- 等待机制：手牌满时，生成的塑造法术进入`pendingCards`队列，当手牌有空位时自动添加
- 状态标记：随从通过`hasGrantedShapingSpell`属性标记是否已生成塑造法术，回合开始时重置为false
- 临时标记：通过`Card.isTemporary`属性标记为临时卡片，用于回合结束时筛选销毁
- 代码实现：`Player.addCardToHand()`（添加卡片）、`Player.onTurnEndCards()`（处理临时卡片）、`Player.tryAddPendingCards()`（添加等待队列卡片）

## 命名规范原则

1. **一致性优先**：相同概念在代码、注释和文档中必须使用统一术语
2. **语义明确**：术语应准确反映功能和逻辑，避免歧义
3. **简洁易懂**：术语应简洁明了，便于理解和记忆
4. **英文命名**：代码变量和方法名使用英文，遵循驼峰命名法
5. **中文注释**：关键逻辑和概念使用中文注释，解释术语含义和功能

## 代码示例

### 手牌操作

```typescript
// 招募随从到手牌
player.recruitMinion(minion);

// 从手牌放置随从到战场
player.placeMinionFromHand(handIndex, battlefieldPosition);

// 将战场随从放回手牌
player.returnMinionToHand(battlefieldPosition);

// 出售手牌随从
player.sellMinion('hand', handIndex);
```

### 召唤操作

```typescript
// 从手牌召唤随从到战场
player.summonMinion(minion, referencePosition);

// 战场上的随从效果触发召唤
minion.battlecry(game); // 战吼中调用召唤

// 亡语触发召唤
minion.deathrattle(game); // 亡语中调用召唤
```

### 战吼触发

```typescript
// 放置随从时触发
if (success && minionToPlace) {
  // 触发战吼效果
  minionToPlace.battlecry(this);
}
```

## 注意事项

1. 避免使用容易混淆的术语：如"替补席"已统一为"手牌"，"bench"已统一为"hand"
2. 新增功能时应遵循本命名规范，避免引入新的术语不一致问题
3. 代码审查时应检查术语使用的一致性

## 更新记录

- 2025-12-13：初始版本，定义核心术语和命名规范
- 2025-12-13：更新术语对照表，添加详细解释和代码示例
- 2025-12-13：添加塑造法术术语定义，完善法术生成和等待机制说明
